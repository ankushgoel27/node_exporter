name: "Build"
on:
  pull_request:
jobs:
  build:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v3
        with:
          path: go/src/github.com/algorand/node_exporter
      - uses: actions/setup-go@v3
        with:
          go-version: '1.10.3'
      - name: build test
        run: make test
        working-directory: /home/runner/work/node_exporter/go/src/github.com/algorand/node_exporter
        env:
          GOPATH: /home/runner/work/node_exporter/go
      - name: build package
        run: make package
        working-directory: /home/runner/work/node_exporter/go/src/github.com/algorand/node_exporter
        env:
          GOPATH: /home/runner/work/node_exporter/go
      - uses: actions/upload-artifact@v3
        with:
          name: package
          path: /home/runner/work/node_exporter/go/src/github.com/algorand/node_exporter/*.tar.gz
